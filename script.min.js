document.addEventListener("DOMContentLoaded",function(){"use strict";const e=[];function t(e,t=16e3){const n=2*t,a=e.length*e.BYTES_PER_ELEMENT,i=new ArrayBuffer(44+a),o=new DataView(i),r=(e,t)=>{for(let n=0;n<t.length;n++)o.setUint8(e+n,t.charCodeAt(n))};return r(0,"RIFF"),o.setUint32(4,36+a,!0),r(8,"WAVE"),r(12,"fmt "),o.setUint32(16,16,!0),o.setUint16(20,1,!0),o.setUint16(22,1,!0),o.setUint32(24,t,!0),o.setUint32(28,n,!0),o.setUint16(32,2,!0),o.setUint16(34,16,!0),r(36,"data"),o.setUint32(40,a,!0),new Int16Array(i,44).set(e),new Blob([i],{type:"audio/wav"})}!function(){let e=!1,n=null,a=[],i=null;const o=document.getElementById("tsr-screen-1"),r=document.getElementById("pause-asr-block"),s=document.getElementById("asr-loader"),l=document.querySelector(".technology_tsr-result"),d=document.getElementById("start-asr"),c=document.getElementById("stop-asr"),u=document.getElementById("asr-live-transcription"),m=document.getElementById("asr-language-detected"),p=document.getElementById("asr-timer");function y(e){const t={initial:{start:"block",loader:"none",pause:"none",result:"none"},recording:{start:"none",loader:"none",pause:"flex",result:"none"},processing:{start:"none",loader:"flex",pause:"none",result:"none"},result:{start:"none",loader:"none",pause:"none",result:"flex"}},n=t[e]||t.initial;o&&(o.style.display=n.start),s&&(s.style.display=n.loader),r&&(r.style.display=n.pause),l&&(l.style.display=n.result)}function g(e,t){y("result"),u&&(u.textContent=e),m&&(m.textContent=t)}async function h(e){try{const n=new(window.AudioContext||window.webkitAudioContext),a=await e.arrayBuffer(),i=await n.decodeAudioData(a),o=await function(e,t){return new Promise(n=>{const a=new OfflineAudioContext(1,e.duration*t,t),i=a.createBufferSource();i.buffer=e,i.connect(a.destination),i.start(),a.startRendering().then(n)})}(i,16e3),r=function(e){const t=e.getChannelData(0),n=new Int16Array(t.length);for(let e=0;e<t.length;e++)n[e]=32767*Math.max(-1,Math.min(1,t[e]));return n}(o),s=t(r,16e3),l=new FormData;l.append("audio_file",s,"audio.wav"),l.append("sampling_rate","16000"),l.append("language_code","bn-IN, en-IN, gu-IN, hi-IN, kn-IN, ml-IN, mr-IN, or-IN, pa-IN, ta-IN, te-IN"),l.append("sender_id",crypto.randomUUID());const d=await fetch("https://api.vachana.ai/stt/v3",{method:"POST",body:l});if(!d.ok){const e=await d.text();throw new Error(`API Error ${d.status}: ${e}`)}const c=await d.json();if(c.success){g(c.transcript.replace(/<[^>]+>/g,"").trim()||"No transcription available",c.language_detected||"Unknown")}else g("Transcription failed","N/A")}catch(e){console.error("Error processing audio:",e),g("Error processing audio. Please try again.","N/A")}}function f(){n&&e&&n.stop()}d&&d.addEventListener("click",async function(){if(!e)try{const t=await navigator.mediaDevices.getUserMedia({audio:!0});n=new MediaRecorder(t),a=[],n.ondataavailable=e=>e.data.size>0&&a.push(e.data),n.onstop=()=>{e=!1,clearInterval(i),t.getTracks().forEach(e=>e.stop()),y("processing");h(new Blob(a,{type:"audio/webm"}))},n.start(),e=!0,y("recording");let o=30;p&&(p.textContent=`00:${String(o).padStart(2,"0")}`),i=setInterval(()=>{o--,p&&(p.textContent=`00:${String(Math.max(0,o)).padStart(2,"0")}`)},1e3),setTimeout(f,3e4)}catch(e){console.error("Error starting recording:",e),g("Error: Could not access microphone.","N/A")}}),c&&c.addEventListener("click",f),o&&y("initial")}(),function(){const e=document.getElementById("tts-input-button");if(!e)return;let n=null;const a=document.getElementById("tts-screen-1"),i=document.getElementById("integ2-screen2"),o=document.getElementById("tts-loader"),r=document.getElementById("tts-result-play"),s=document.getElementById("tts-result-pause"),l=document.getElementById("tts-input"),d=document.getElementById("tts-result-type"),c=document.getElementById("tts-result-preson"),u=document.getElementById("tts-result-lang"),m=document.getElementById("play-tts"),p=document.getElementById("pause-tts"),y={Divya:{voice_name:"hi_female_1",language:"Hindi",model:"mix-IN"},Anu:{voice_name:"hi_female_2",language:"Hindi",model:"mix-IN"},Disha:{voice_name:"hi_female_3",language:"Hindi",model:"mix-IN"},Arjun:{voice_name:"ravan",language:"Hindi",model:"mix-IN"},Claire:{voice_name:"en_female_1",language:"English",model:"mix-IN"},Mark:{voice_name:"en_male_2",language:"English",model:"mix-IN"}},g={Hindi:"mix-IN",English:"mix-IN",Bengali:"mix-IN",Marathi:"mix-IN",Kannada:"mix-IN",Tamil:"mix-IN"};function h(e,t={}){const n="result"===e;a&&(a.style.display="input"===e?"block":"none"),i&&(i.style.display="input"!==e?"flex":"none"),o&&(o.style.display="processing"===e?"block":"none"),r&&(r.style.display=n?"flex":"none"),s&&(s.style.display="none"),n&&(d&&(d.textContent=t.text),c&&(c.textContent=t.person),u&&(u.textContent=t.language))}e.addEventListener("click",async e=>{e.preventDefault();const a=l.value.trim();if(!a)return;const i=document.querySelector('input[name="TTS-Voice"]:checked')?.id||"Divya",o=document.querySelector('input[name="TTS-Language"]:checked')?.id||"English",d=y[i]||y.Divya;h("processing");try{const e={text:a,model:g[o],audio_bytes:null,sample_rate:22050,voice_name:d.voice_name,params:{stream_chunk_size:120,speed:1}},l=await fetch("https://ttsplayground-bk.gnani.site/api/v1/api/file/process",{method:"POST",headers:{"Content-Type":"application/json","x-request-id":crypto.randomUUID()},body:JSON.stringify(e)});if(!l.ok)throw new Error(`TTS API request failed: ${l.statusText}`);const c=(await l.text()).replace(/^"|"$/g,""),u=atob(c),m=new Int16Array(u.length/2);for(let e=0;e<m.length;e++)m[e]=u.charCodeAt(2*e+1)<<8|u.charCodeAt(2*e);const p=t(m,22050);n=new Audio(URL.createObjectURL(p)),n.onended=()=>{r&&(r.style.display="flex"),s&&(s.style.display="none")},h("result",{text:a,person:i,language:d.language})}catch(e){console.error("TTS Error:",e),h("input"),alert("Error generating audio. Please try again.")}}),m&&m.addEventListener("click",()=>{n&&(n.play().catch(e=>console.error("Audio playback error:",e)),r&&(r.style.display="none"),s&&(s.style.display="flex"))}),p&&p.addEventListener("click",()=>{n&&!n.paused&&(n.pause(),r&&(r.style.display="flex"),s&&(s.style.display="none"))})}(),function(){const e=document.getElementById("wf-form-Home-Hero-Demo");if(!e)return;const t=document.getElementById("hero-form-field"),n=document.getElementById("hero-form-button");e.addEventListener("submit",async e=>{if(e.preventDefault(),n.classList.contains("is-loading"))return;const a=t.value.trim();if(!/^\d{10}$/.test(a))return;const i=document.querySelector('input[name="Country-Code-Home"]:checked'),o=i?i.value:"India",r="United States"===o?"+1":"+91",s=`https://api.inya.ai/genbots/website_trigger_call/${"United States"===o?"2b0705400efd4d499394888edc0809f7":"825003a4d58a42fcac11e68d52346547"}`,l="apiCallRateLimit";let d=JSON.parse(localStorage.getItem(l))||{count:0,timestamp:0};if(Date.now()-d.timestamp>6e5&&(localStorage.removeItem(l),d={count:0,timestamp:0}),d.count>=10)console.warn("Rate limit reached.");else{n.disabled=!0,n.classList.add("is-loading");try{const e=await fetch(s,{method:"POST",headers:{accept:"application/json","content-type":"application/json"},body:JSON.stringify({phone:a,name:"",countryCode:r})});if(!e.ok)throw new Error(`API request failed: ${e.statusText}`);n.classList.add("is-success"),0===d.count&&(d.timestamp=Date.now()),d.count++,localStorage.setItem(l,JSON.stringify(d))}catch(e){console.error("Phone call trigger error:",e),n.classList.add("is-failure")}finally{n.classList.remove("is-loading"),setTimeout(()=>{n.classList.remove("is-success","is-failure"),n.disabled=!1},3e3)}}})}(),function(){document.querySelectorAll(".tts-media_icon").forEach(e=>{e.style.pointerEvents="none"});const t="https://cdn.jsdelivr.net/gh/adarshgowdaa/website-audio@2f9dde10df0a7c4a4d45bea9456feb1b45132d10/";function n(n){const{controlRadiosQuery:a,toggleId:i,playPauseBtnId:o,playIconId:r,pauseIconId:s,sliderId:l,otherLangLabelId:d,fileMap:c,resolveUrlFn:u}=n,m=document.getElementById(o);if(!m)return;const p=document.querySelectorAll(a),y=document.getElementById(i),g=document.getElementById(r),h=document.getElementById(s),f=document.getElementById(l),I=document.getElementById(d),E=new Audio;E.preload="auto",e.push(E);let v=!1;const B=e=>{g&&(g.style.display=e?"none":"flex"),h&&(h.style.display=e?"flex":"none")},_=()=>{if(!I)return;const e=document.querySelector(`${a}:checked`);if(e){const t=e.parentElement.querySelector(".technology_form-select-link-label");t&&(I.textContent=t.textContent)}},w=()=>t+u(c);async function b(e){if(v||E.src.endsWith(e))return;v=!0;const t=!E.paused&&!E.ended,n=E.currentTime||0;try{E.pause(),E.src=e,await new Promise((e,t)=>{E.addEventListener("loadedmetadata",e,{once:!0}),E.addEventListener("error",t,{once:!0})});const a=isFinite(E.duration)?E.duration:0;E.currentTime=Math.min(n,a),t&&await E.play()}catch(e){console.warn(`Seamless switch failed for ${o}:`,e)}finally{B(!E.paused),v=!1}}m.addEventListener("click",async()=>{const e=w();E.src.endsWith(e)?E.paused?await E.play().catch(e=>console.error(e)):E.pause():(await b(e),E.paused&&await E.play().catch(e=>console.error(e)))});const k=()=>{d&&_(),b(w())};p.forEach(e=>e.addEventListener("change",k)),y&&y.addEventListener("change",k),E.addEventListener("timeupdate",()=>f&&isFinite(E.duration)&&(f.value=E.currentTime/E.duration*100)),f&&f.addEventListener("input",()=>isFinite(E.duration)&&(E.currentTime=f.value/100*E.duration)),E.onplay=()=>{e.forEach(e=>e!==E&&!e.paused&&e.pause()),B(!0)},E.onpause=()=>B(!1),E.onended=()=>{B(!1),f&&(f.value=0)},d&&_(),B(!1),E.src=w()}function a(t){const{playPauseBtnId:n,playIconId:a,pauseIconId:i,sliderId:o,audioUrl:r}=t,s=document.getElementById(n);if(!s)return null;const l=document.getElementById(a),d=document.getElementById(i),c=document.getElementById(o),u=new Audio(r);u.preload="auto",e.push(u);const m=e=>{l&&(l.style.display=e?"none":"flex"),d&&(d.style.display=e?"flex":"none")};return s.addEventListener("click",()=>u.paused?u.play():u.pause()),u.onplay=()=>{e.forEach(e=>e!==u&&!e.paused&&e.pause()),m(!0)},u.onpause=()=>m(!1),u.onended=()=>{m(!1),c&&(c.value=0)},u.addEventListener("timeupdate",()=>c&&isFinite(u.duration)&&(c.value=u.currentTime/u.duration*100)),c&&c.addEventListener("input",()=>isFinite(u.duration)&&(u.currentTime=c.value/100*u.duration)),m(!1),c&&(c.value=0),u}n({controlRadiosQuery:'input[name="STS-Language"]',toggleId:"sts-check",playPauseBtnId:"sts-play-pause",playIconId:"sts-play-icon",pauseIconId:"sts-pause-icon",sliderId:"sts-slider",otherLangLabelId:"sts-other-lang",fileMap:{Blondie:{English:"English_Blondie.mp3",German:"German_Blondie.mp3",Spanish:"Spanish_Blondie.mp3"},Matt:{English:"English_Matt.mp3",French:"French_Matt.mp3"},Raju:{English:"English_Raju.mp3",Kannada:"Kannada_Raju.mp3",Malayalam:"Malayalam_Raju.mp3",Marathi:"Marathi_Raju.mp3"},Shakuntala:{English:"English_Shakuntala.mp3",Hindi:"Hindi_Shakuntala.mp3",Bengali:"Bengali_Shakuntala.mp3",Tamil:"Tamil_shakuntala.mp3"}},resolveUrlFn:e=>{const t=document.querySelector('input[name="STS-Language"]:checked')?.value||"French",n=e[{German:"Blondie",Spanish:"Blondie",French:"Matt",Kannada:"Raju",Malayalam:"Raju",Marathi:"Raju",Hindi:"Shakuntala",Bengali:"Shakuntala",Tamil:"Shakuntala"}[t]||"Blondie"]||{},a=document.getElementById("sts-check")?.checked;return a&&n[t]||n.English}}),n({controlRadiosQuery:'input[name="Noise-Environment"]',toggleId:"noise-check",playPauseBtnId:"noise-play-pause",playIconId:"noise-play-icon",pauseIconId:"noise-pause-icon",sliderId:"noise-slider",fileMap:{Office:{original:"Office.mp3",neutralized:"Office_Neutralized.mp3"},"Call Centre":{original:"Call_Center.mp3",neutralized:"Call_Center_Neutralized.mp3"},Traffic:{original:"Traffic.mp3",neutralized:"Traffic_Neutralized.mp3"}},resolveUrlFn:e=>{const t=document.querySelector('input[name="Noise-Environment"]:checked')?.value||"Office",n=document.getElementById("noise-check")?.checked,a=e[t]||e.Office;return n?a.neutralized:a.original}}),a({playPauseBtnId:"barge-play-pause",playIconId:"barge-play-icon",pauseIconId:"barge-pause-icon",sliderId:"barge-slider",audioUrl:t+"With _barge.mp3"}),a({playPauseBtnId:"nobarge-play-pause",playIconId:"nobarge-play-icon",pauseIconId:"nobarge-pause-icon",sliderId:"nobarge-slider",audioUrl:t+"Without_barge.mp3"})}(),function(){const t=document.getElementById("accent-play-pause"),n=document.getElementById("accent-play-icon"),a=document.getElementById("accent-pause-icon"),i=document.getElementById("accent-slider"),o=document.getElementById("accent-check"),r=document.querySelectorAll('input[name="Accent-Transformation"]');if(n&&(n.style.pointerEvents="none"),a&&(a.style.pointerEvents="none"),!t)return;const s=new Audio;s.preload="auto",e.push(s);const l={"American English":{original:"Indian_Accent_matt.mp3",transformed:"American English_matt.mp3"},"Australian English":{original:"Indian_English.mp3",transformed:"Australian_English.mp3"},"British English":{original:"Indian_English_james.mp3",transformed:"British English_James.mp3"}},d=e=>{n&&(n.style.display=e?"none":"flex"),a&&(a.style.display=e?"flex":"none")},c=()=>{const e=document.querySelector('input[name="Accent-Transformation"]:checked')?.value||"American English",t=o?.checked,n=l[e];if(!n)return console.error("Accent Player: Could not find files for sample:",e),null;return"https://cdn.jsdelivr.net/gh/adarshgowdaa/website-audio@2f9dde10df0a7c4a4d45bea9456feb1b45132d10/"+(t?n.transformed:n.original)},u=()=>{const e=c();if(e&&!decodeURIComponent(s.src).endsWith(e)){const t=s.currentTime,n=!s.paused&&!s.ended;s.src=e,s.addEventListener("loadedmetadata",()=>{s.currentTime=t,n&&s.play().catch(e=>console.error("Autoplay after switch failed.",e))},{once:!0})}};t.addEventListener("click",()=>{const e=c();decodeURIComponent(s.src).endsWith(e)?s.paused?s.play().catch(e=>console.error("Playback failed.",e)):s.pause():(s.src=e,s.play().catch(e=>console.error("Playback failed.",e)))}),r.forEach(e=>e.addEventListener("change",u)),o&&o.addEventListener("change",u),s.onplay=()=>{e.forEach(e=>e!==s&&!e.paused&&e.pause()),d(!0)},s.onpause=()=>d(!1),s.onended=()=>{d(!1),i&&(i.value=0)},s.addEventListener("timeupdate",()=>{i&&isFinite(s.duration)&&(i.value=s.currentTime/s.duration*100)}),i&&i.addEventListener("input",()=>{isFinite(s.duration)&&(s.currentTime=i.value/100*s.duration)}),d(!1),s.src=c()}()});